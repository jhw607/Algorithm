```python3
import re
from itertools import product
def c (x, y):
    for a, b in zip(list(x), list(y)):
        if a == '*':
            continue
        elif a != b:
            return False
    return True

def solution(user_id, banned_id):
    answer = 0
    temp_all = []
    for x in banned_id:
        temp = []
        x = re.sub('\*', '.', x)
        for y in user_id:
            if len(x) == len(y):
                # if c(x, y):
                if re.fullmatch(x, y):
                    temp.append(y)
        temp_all.append(temp)
        
    temp = []
    size = len(banned_id)
    for x in product(*temp_all):
        if len(set(x)) == size:
            # answer += 1
            temp.append(tuple(sorted(x)))
    
    return len(set(temp))
```
